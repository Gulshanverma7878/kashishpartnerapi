{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/k/Desktop/kashishpartnerapii/kashishpartnerapi/app/csc/history/page.js"],"sourcesContent":["'use client';\r\nimport React, { useState } from 'react';\r\n\r\nconst TransactionSearch = () => {\r\n  const [identifier, setIdentifier] = useState('');\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getUserIdFromLocalStorage = () => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    return user ? user.id : null;\r\n  };\r\n\r\n  const searchTransaction = async () => {\r\n    const userId = getUserIdFromLocalStorage();\r\nalert(userId)\r\nalert(identifier)\r\n\r\n    if (!userId || !identifier) {\r\n      setError('User ID or Identifier is missing!');\r\n      return;\r\n    }\r\n\r\n    const apiUrl = `https://api.partner.kashishindiapvtltd.com/api/recharge/status?number=${identifier}&id=${userId}`;\r\n\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      const data = await response.json();\r\n\r\n      if (data.message === 'SUCCESS') {\r\n        setTransactions(data.data);\r\n        setError(null);\r\n      } else if (data.err) {\r\n        setError(data.err);\r\n        setTransactions([]);\r\n      } else {\r\n        setError('No transactions found or there was an error.');\r\n        setTransactions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Fetch error:', error);\r\n      setError('Something went wrong. Please try again later.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white shadow rounded-lg mt-10 max-w-7xl mx-auto\">\r\n      <h1 className=\"text-2xl font-semibold text-gray-800 mb-6 text-center\">Search CSC Transaction</h1>\r\n\r\n      {/* Search Input */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter Identifier (e.g. 7878837341)\"\r\n          value={identifier}\r\n          onChange={(e) => setIdentifier(e.target.value)}\r\n          className=\"w-full sm:w-1/2 px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n        <button\r\n          onClick={searchTransaction}\r\n          className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 shadow-sm transition\"\r\n        >\r\n          Search\r\n        </button>\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && <div className=\"text-red-600 mb-4\">{error}</div>}\r\n\r\n      {/* Results Table */}\r\n      {transactions.length > 0 ? (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full border divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Sr. No</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Transaction ID</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Bill ID</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">CSC ID</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Amount</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Status</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-semibold border text-gray-600 uppercase\">Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {transactions.map((txn, index) => (\r\n                <tr key={txn.cscTxn} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-2 text-center border text-gray-700\">{index + 1}</td>\r\n                  <td className=\"px-4 py-2 text-center border text-blue-700 break-all\">{txn.cscTxn}</td>\r\n                  <td className=\"px-4 py-2 text-center border text-blue-700 break-all\">{txn.refId}</td>\r\n                  <td className=\"px-4 py-2 text-center border text-blue-700 break-all\">{txn.cscId}</td>\r\n                  <td className=\"px-4 py-2 text-center border text-gray-700\">â‚¹{txn.txnAmount}</td>\r\n                  <td className=\"px-4 py-2 border text-center\">\r\n                    <span\r\n                      className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        txn.status === '0'\r\n                          ? 'bg-green-100 text-green-700'\r\n                          : 'bg-red-100 text-red-700'\r\n                      }`}\r\n                    >\r\n                      {txn.status === '0' ? 'Success' : 'Failed'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-2 border text-center text-gray-600\">\r\n                    {new Date(txn.date).toLocaleString()}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-gray-500 text-center mt-4\">No transactions found.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionSearch;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}