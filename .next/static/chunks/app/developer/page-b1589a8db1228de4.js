(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{413:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var a=r(1990),n=r(2525);let s=(0,a.U1)({reducer:{auth:n.Ay}})},2525:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,LA:()=>n,Qv:()=>l,ri:()=>s});let a=(0,r(1990).Z0)({name:"auth",initialState:{token:null,user:null,isAuthenticated:!1},reducers:{setCredentials:(e,t)=>{let{token:r,user:a}=t.payload;e.token=r,r&&!(r.length<=0)&&(e.user=a,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)))},updateToken:(e,t)=>{let r=t.payload;r&&!(r.length<=0)&&(e.token=r,e.isAuthenticated=!0,localStorage.setItem("token",r))},updateUser:(e,t)=>{let r=t.payload;e.user=r,localStorage.setItem("user",JSON.stringify(r))},logout:e=>{e.token=null,e.user=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},hydrate:e=>{let t=localStorage.getItem("token"),r=localStorage.getItem("user");e.token=t,e.user=r&&JSON.parse(r),e.isAuthenticated=!!(t&&r)}}}),{setCredentials:n,logout:s,hydrate:l,updateToken:o,updateUser:i}=a.actions,d=a.reducer},2555:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155),n=r(2115);let s=e=>{let{isOpen:t,onClose:r,onSubmit:s,onResend:l}=e,[o,i]=(0,n.useState)(["","","","","",""]);(0,n.useEffect)(()=>{if(t){let e=document.getElementById("otp-0");null==e||e.focus()}},[t]);let d=(e,t)=>{if(!/^\d*$/.test(t))return;let r=[...o];if(r[e]=t,i(r),t&&e<5){let t=document.getElementById("otp-".concat(e+1));null==t||t.focus()}},u=(e,t)=>{if("Backspace"===t.key&&!o[e]&&e>0){let t=document.getElementById("otp-".concat(e-1));null==t||t.focus()}};return t?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50  ",children:(0,a.jsxs)("div",{className:"z-100  rounded-2xl bg-gradient-to-r from-indigo-200 via-purple-200 to-pink-200 shadow-xl w-full max-w-md border border-gray-100 transform transition-all duration-300 scale-95 hover:scale-100",children:[(0,a.jsx)("h2",{className:" rounded-t-2xl text-3xl font-extrabold text-center mb-6 bg-gray-500 text-white p-4 ",children:(0,a.jsx)("span",{className:"inline-block",children:"OTP Verification"})}),(0,a.jsx)("p",{className:"text-center text-gray-900 mb-8",children:"We've sent a 6-digit code to your mobile"}),(0,a.jsx)("div",{className:"flex justify-center space-x-3 mb-8",children:o.map((e,t)=>(0,a.jsx)("input",{id:"otp-".concat(t),type:"text",maxLength:1,value:e,className:"w-14 h-14 border-2 border-black rounded-xl text-center text-2xl font-semibold text-gray-700  focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all",onChange:e=>d(t,e.target.value),onKeyDown:e=>u(t,e),autoFocus:0===t},t))}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6 mx-2",children:[(0,a.jsx)("button",{className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl hover:bg-gray-200 transition-colors font-medium text-sm uppercase tracking-wide shadow-sm",onClick:r,children:"Cancel"}),(0,a.jsx)("button",{className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-xl  hover:from-purple-700 hover:to-indigo-700 transition-all font-medium text-sm uppercase tracking-wide shadow-lg shadow-purple-100 hover:shadow-purple-200",onClick:()=>{let e=o.join("");6===e.length?s(e):alert("Please enter complete OTP")},children:"Verify"})]}),(0,a.jsxs)("p",{className:"text-center text-sm text-gray-400 mb-4",children:["Didn't receive code?"," ",(0,a.jsx)("button",{className:"text-purple-600 hover:text-purple-700 font-medium transition-colors",onClick:()=>{i(["","","","","",""]),l()},children:"Resend OTP"})]})]})}):null}},4405:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(5155),n=r(5784);let s={developerPut:(e,t)=>n.S.put("api/credentials/".concat(e),t),developerGet:e=>n.S.get("api/credentials/".concat(e)),developerPostOtp:e=>n.S.post("api/user/send-otp-client",e),developerPostOtpVerify:e=>n.S.post("api/user/verify-otp-client",e)};var l=r(5041),o=r(2115);let i=()=>{let e=(0,l.n)({mutationFn:e=>s.developerGet(e)});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}};var d=r(4540),u=r(2555);let c=()=>{let e=(0,l.n)({mutationFn:e=>{let{id:t,payload:r}=e;return s.developerPut(t,r)}});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}},m=()=>{let e=(0,l.n)({mutationFn:e=>s.developerPostOtp(e)});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}},p=()=>{let e=(0,l.n)({mutationFn:e=>s.developerPostOtpVerify(e)});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}};var x=r(5695);let h=e=>{let{label:t,value:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:t}),(0,a.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:r||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not Available"})})]})},g=()=>{var e,t;let r=(0,d.d4)(e=>e.auth.user),{mutate:n,data:s,error:l,isPending:g}=i(),{mutate:v}=c(),{mutate:b}=m(),{mutate:f,data:y}=p(),j=(0,x.useRouter)(),[N,w]=(0,o.useState)(!1),[k,S]=(0,o.useState)(!1),[C,P]=(0,o.useState)(!1),[E,I]=(0,o.useState)(""),[R,A]=(0,o.useState)(""),[_,O]=(0,o.useState)(null),[F,T]=(0,o.useState)(null),[L,U]=(0,o.useState)(!0),[D,q]=(0,o.useState)(!1),B=(0,o.useRef)(null),V=(0,o.useRef)(null);(0,o.useEffect)(()=>{r&&n(null==r?void 0:r.id)},[]),(0,o.useEffect)(()=>{var e,t,r;(null==s||null==(r=s.data)||null==(t=r.data)||null==(e=t[0])?void 0:e.callback)&&I(s.data.data[0].callback)},[s]),(0,o.useEffect)(()=>{let e=e=>{k&&B.current&&!B.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[k]),(0,o.useEffect)(()=>{var e,t,r;(null==s||null==(r=s.data)||null==(t=r.data)||null==(e=t[0])?void 0:e.ip)&&A(s.data.data[0].ip)},[s]),(0,o.useEffect)(()=>{let e=e=>{C&&V.current&&!V.current.contains(e.target)&&P(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[C]),(0,o.useEffect)(()=>{var e,t,r,a;(null==y||null==(t=y.data)||null==(e=t.UserCredential)?void 0:e.client_id)&&(null==y||null==(a=y.data)||null==(r=a.UserCredential)?void 0:r.client_secret)&&("secret"===F?O({client_id:y.data.UserCredential.client_id,client_secret:y.data.UserCredential.client_secret}):"ip"===F&&U(!1),T(null))},[y]);let z=()=>{console.log("Resend OTP clicked")};if(g)return(0,a.jsx)("h1",{className:"text-center text-xl font-semibold",children:"Loading..."});let J=null==s||null==(t=s.data)||null==(e=t.data)?void 0:e[0];return(0,a.jsxs)("div",{className:"p-6",children:[J&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white px-4 py-3 rounded shadow mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Developer Credentials"}),(0,a.jsx)("button",{onClick:()=>j.push("/document"),className:"bg-blue-600 hover:bg-blue-500 text-white font-medium px-4 py-2 rounded transition duration-200",children:"Documentation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(h,{label:"ID",value:J.id}),(0,a.jsx)(h,{label:"User ID",value:J.user_id}),(0,a.jsx)(h,{label:"Client ID",value:J.client_id}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:"Client Secret"}),_?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:(0,a.jsx)("span",{className:"block overflow-x-auto whitespace-nowrap",children:_.client_secret})})}):(0,a.jsx)("button",{onClick:()=>{w(!0),r&&b({mobileno:r.mobileno})},className:"text-sm text-indigo-600 font-medium hover:underline",children:"View Secret (OTP Required)"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",ref:B,children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:"Callback"}),k?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:E,onChange:e=>I(e.target.value),className:"text-sm text-gray-800 border border-gray-300 rounded px-2 py-1 w-full",autoFocus:!0}),(0,a.jsx)("button",{onClick:()=>{r&&(v({id:r.id,payload:{callback:E}}),S(!1))},className:"text-white bg-green-500 hover:bg-green-600 px-3 py-1 rounded",children:"Save"})]}):(0,a.jsx)("p",{onClick:()=>S(!0),className:"text-sm text-indigo-600 font-medium hover:underline cursor-pointer",children:E||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not Available"})})]}),L?(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:"Ip Secret"}),(0,a.jsx)("button",{onClick:()=>{q(!0),r&&b({mobileno:r.mobileno})},className:"text-sm text-indigo-600 font-medium hover:underline",children:"View Ip (OTP Required)"})]}):(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",ref:V,children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:"Ip"}),C?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:R,onChange:e=>A(e.target.value),className:"text-sm text-gray-800 border border-gray-300 rounded px-2 py-1 w-full",autoFocus:!0}),(0,a.jsx)("button",{onClick:()=>{r&&(v({id:r.id,payload:{ip:R}}),P(!1))},className:"text-white bg-green-500 hover:bg-green-600 px-3 py-1 rounded",children:"Save"})]}):(0,a.jsx)("p",{onClick:()=>P(!0),className:"text-sm text-indigo-600 font-medium hover:underline cursor-pointer",children:R||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not Available"})})]})]})]}),(0,a.jsx)(u.A,{isOpen:N,onClose:()=>w(!1),onSubmit:e=>{r&&(T("secret"),f({otp:e,mobileno:r.mobileno})),w(!1)},onResend:z}),(0,a.jsx)(u.A,{isOpen:D,onClose:()=>q(!1),onSubmit:e=>{r&&(T("ip"),f({otp:e,mobileno:r.mobileno})),q(!1)},onResend:z})]})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5764:(e,t,r)=>{Promise.resolve().then(r.bind(r,4405))},5784:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var a=r(3464),n=r(413),s=r(2525),l=r(6671);let o=r(9509).env.NEXT_PUBLIC_API_URL||"https://api.partner.kashishindiapvtltd.com/",i=a.A.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:6e5});i.interceptors.request.use(e=>{let t=n.M.getState().auth.token;return e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>(e.data.err&&(0,l.oR)("Failed",{description:e.data.err||"Error in Request"}),e),e=>{var t,r,a,o,i;try{(0,l.oR)("Error In Request",{description:(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.err)||(null==e||null==(i=e.response)||null==(o=i.data)?void 0:o.message)||"Request Failed"})}catch(t){let{message:e}=t;console.error("error",e),(0,l.oR)("Error",{description:"failed to resolve response"})}return console.log("error",e),(null==(t=e.response)?void 0:t.status)==401&&((0,l.oR)("Auth Expired",{description:"Login in to continue"}),n.M.dispatch((0,s.ri)()),window.location.href="/"),Promise.reject(e)})}},e=>{var t=t=>e(e.s=t);e.O(0,[927,540,41,441,684,358],()=>t(5764)),_N_E=e.O()}]);