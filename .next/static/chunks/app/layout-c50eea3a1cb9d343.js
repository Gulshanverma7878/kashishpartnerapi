(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{413:(e,s,t)=>{"use strict";t.d(s,{M:()=>r});var l=t(1990),a=t(2525);let r=(0,l.U1)({reducer:{auth:a.Ay}})},1842:(e,s,t)=>{"use strict";t.d(s,{W:()=>a});var l=t(5784);let a={getProfileData:e=>l.S.get("/api/user/".concat(e)),putProfileData:(e,s)=>l.S.put("/api/user/".concat(e),s)}},2525:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>o,LA:()=>a,Qv:()=>n,ri:()=>r});let l=(0,t(1990).Z0)({name:"auth",initialState:{token:null,user:null,isAuthenticated:!1},reducers:{setCredentials:(e,s)=>{let{token:t,user:l}=s.payload;e.token=t,t&&!(t.length<=0)&&(e.user=l,e.isAuthenticated=!0,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(l)))},updateToken:(e,s)=>{let t=s.payload;t&&!(t.length<=0)&&(e.token=t,e.isAuthenticated=!0,localStorage.setItem("token",t))},updateUser:(e,s)=>{let t=s.payload;e.user=t,localStorage.setItem("user",JSON.stringify(t))},logout:e=>{e.token=null,e.user=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},hydrate:e=>{let s=localStorage.getItem("token"),t=localStorage.getItem("user");e.token=s,e.user=t&&JSON.parse(t),e.isAuthenticated=!!(s&&t)}}}),{setCredentials:a,logout:r,hydrate:n,updateToken:i,updateUser:c}=l.actions,o=l.reducer},2674:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var l=t(5155),a=t(4540),r=t(413),n=t(2525),i=t(2115),c=t(1716),o=t(6715),d=t(192);function h(e){let{children:s}=e,[t]=(0,i.useState)(()=>new c.E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1}}}));return(0,l.jsxs)(o.Ht,{client:t,children:[s,(0,l.jsx)(d.E,{initialIsOpen:!1})]})}function u(e){let{children:s}=e;return(0,i.useEffect)(()=>{r.M.dispatch((0,n.Qv)())},[]),(0,l.jsx)(a.Kq,{store:r.M,children:(0,l.jsx)(h,{children:s})})}},5784:(e,s,t)=>{"use strict";t.d(s,{S:()=>c});var l=t(3464),a=t(413),r=t(2525),n=t(6671);let i=t(9509).env.NEXT_PUBLIC_API_URL||"https://api.partner.kashishindiapvtltd.com/",c=l.A.create({baseURL:i,headers:{"Content-Type":"application/json"},timeout:6e5});c.interceptors.request.use(e=>{let s=a.M.getState().auth.token;return e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",s&&(e.headers.Authorization="Bearer ".concat(s)),e}),c.interceptors.response.use(e=>(e.data.err&&(0,n.oR)("Failed",{description:e.data.err||"Error in Request"}),e),e=>{var s,t,l,i,c;try{(0,n.oR)("Error In Request",{description:(null==e||null==(l=e.response)||null==(t=l.data)?void 0:t.err)||(null==e||null==(c=e.response)||null==(i=c.data)?void 0:i.message)||"Request Failed"})}catch(s){let{message:e}=s;console.error("error",e),(0,n.oR)("Error",{description:"failed to resolve response"})}return console.log("error",e),(null==(s=e.response)?void 0:s.status)==401&&((0,n.oR)("Auth Expired",{description:"Login in to continue"}),a.M.dispatch((0,r.ri)()),window.location.href="/"),Promise.reject(e)})},6629:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var l=t(1842),a=t(5041);t(2115);let r=()=>{let e=(0,a.n)({mutationFn:async e=>{let{data:s}=await l.W.getProfileData(e);return s}});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}}},9204:(e,s,t)=>{Promise.resolve().then(t.bind(t,2674)),Promise.resolve().then(t.bind(t,9343)),Promise.resolve().then(t.t.bind(t,5688,23)),Promise.resolve().then(t.t.bind(t,9432,23)),Promise.resolve().then(t.t.bind(t,9324,23))},9324:()=>{},9343:(e,s,t)=>{"use strict";t.d(s,{default:()=>b});var l=t(5155),a=t(2115),r=t(8126),n=t.n(r),i=t(4540),c=t(5695),o=t(2525),d=t(6874),h=t.n(d),u=t(6766),x=t(351),m=t(4315);let p=e=>{let{sidebarOpen:s,hoveredSidebar:t,toggleSidebar:r,setHoveredSidebar:n}=e,c=(0,i.d4)(e=>e.auth.user),[o,d]=(0,a.useState)(!1);return(0,l.jsxs)("aside",{onMouseEnter:()=>!s&&n(!0),onMouseLeave:()=>!s&&n(!1),className:"fixed top-0 left-0 h-full bg-white shadow-md z-30 transition-all duration-300 ease-in-out ".concat(s||t?"w-64":"w-20"),children:[(0,l.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[(0,l.jsxs)(h(),{href:"/",className:"flex items-center min-w-max",children:[(0,l.jsx)(u.default,{src:"/login/image.png",alt:"AeronPay Logo",width:40,height:40,className:"transition-all rounded-lg"}),(s||t)&&(0,l.jsx)("span",{className:"text-xl font-bold text-blue-600 ml-2 whitespace-nowrap transition-opacity duration-300",children:"Kashish India"})]}),(0,l.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 lg:hidden",children:(0,l.jsx)(x.ND1,{size:24})})]}),(0,l.jsx)("div",{className:"p-4 border-b border-gray-200 bg-white",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsx)("div",{className:"relative w-19 h-19 rounded-full border-2 border-gray-100 shadow-sm overflow-hidden transition-all",children:(0,l.jsx)(u.default,{src:"/login/ashoka.jpg",alt:"User Profile",fill:!0,className:"object-cover"})}),(s||t)&&(0,l.jsxs)("div",{className:"text-center space-y-0.5 transition-opacity duration-300",children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-800 text-md whitespace-nowrap",children:null==c?void 0:c.name}),(0,l.jsx)("span",{className:"text-gray-500 text-xs font-medium",children:"Customer"})]})]})}),(0,l.jsx)("nav",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(100vh - 160px)",paddingBottom:"100px"},children:(0,l.jsxs)("ul",{className:"space-y-1",children:[(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50 text-blue-600"),children:[(0,l.jsx)(m.yYW,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"Dashboard"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/fundRequest",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),children:[(0,l.jsx)(m.M2,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"Fund Request"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/ledgerReport",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),children:[(0,l.jsx)(m.x1c,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"Ledger Report"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/Report",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),children:[(0,l.jsx)(m.d$e,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"Wallet Report"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/developer",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),children:[(0,l.jsx)(m.Wp,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"Developer"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(h(),{href:"/Profile",className:"flex items-center p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),children:[(0,l.jsx)(m.x$1,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"My Profile"})]})}),(0,l.jsxs)("li",{className:"relative",children:[(0,l.jsxs)("button",{className:"flex items-center w-full p-3 rounded-lg transition-all duration-200 ".concat(s||t?"px-4":"px-3 justify-center"," hover:bg-blue-50"),onClick:()=>d(e=>!e),children:[(0,l.jsx)(m.x$1,{className:"text-lg min-w-[24px]"}),(s||t)&&(0,l.jsx)("span",{className:"ml-3 whitespace-nowrap",children:"CSC"})]}),(s||t)&&o&&(0,l.jsxs)("ul",{className:"ml-8 mt-2 space-y-1",children:[(0,l.jsx)("li",{children:(0,l.jsx)(h(),{href:"/csc/history",className:"block px-3 py-2 rounded hover:bg-blue-100",children:"CSC History"})}),(0,l.jsx)("li",{children:(0,l.jsx)(h(),{href:"/loginpage",className:"block px-3 py-2 rounded hover:bg-blue-100",children:"Login"})}),(0,l.jsx)("li",{children:(0,l.jsx)(h(),{href:"/csc/cardmanage",className:"block px-3 py-2 rounded hover:bg-blue-100",children:"Cards Management"})}),(0,l.jsxs)("li",{children:[(0,l.jsx)(h(),{href:"/csc/transaction",className:"block px-3 py-2 rounded hover:bg-blue-100",children:"Transaction"}),(0,l.jsx)("li",{children:(0,l.jsx)(h(),{href:"/csc/topup",className:"block px-3 py-2 rounded hover:bg-blue-100",children:"TopUp History"})})]})]})]})]})})]})};var g=t(6629);let j=e=>{let{toggleSidebar:s}=e,t=(0,i.d4)(e=>e.auth.user),{mutate:r,isPending:n,data:d,error:m}=(0,g.A)(),p=(0,i.wA)(),j=(0,c.useRouter)();return(0,a.useEffect)(()=>{(null==t?void 0:t.id)&&r(t.id)},[null==t?void 0:t.id]),(0,a.useEffect)(()=>{console.log(null==d?void 0:d.data[0].UserWallets[0].balance)},[d]),(0,l.jsx)("header",{className:"bg-white shadow-sm  z-30 sticky top-0",children:(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("button",{onClick:s,className:"mr-4 text-gray-600 hover:text-gray-800",children:(0,l.jsx)(x.ND1,{size:24})})}),(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsxs)("div",{className:"flex justify-end items-center gap-8",children:[(0,l.jsxs)("p",{className:"text-gray-700 font-medium text-sm",children:["Wallet Amount: ",(0,l.jsxs)("span",{className:"text-blue-600 font-semibold",children:["â‚¹ ",null==d?void 0:d.data[0].UserWallets[0].balance]})]}),(0,l.jsx)("button",{className:"flex items-center space-x-2",children:(0,l.jsx)(u.default,{src:"/image.png",alt:"User",width:40,height:40,className:"rounded-full"})})]}),(0,l.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg hidden group-hover:block z-50",children:[(0,l.jsx)("div",{className:"p-4 bg-blue-600 text-white rounded-t-md",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(u.default,{src:"/image.png",alt:"User",width:40,height:40,className:"rounded-full"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h6",{className:"font-semibold",children:null==t?void 0:t.name}),(0,l.jsx)("span",{className:"text-xs",children:"Customer"})]})]})}),(0,l.jsxs)("div",{className:"py-1",children:[(0,l.jsx)(h(),{href:"#",className:"block px-4 py-2 text-sm hover:bg-gray-100",children:null==t?void 0:t.email}),(0,l.jsx)(h(),{href:"#",className:"block px-4 py-2 text-sm hover:bg-gray-100",children:"Membership Type: Customer"}),(0,l.jsx)(h(),{href:"/profile",className:"block px-4 py-2 text-sm hover:bg-gray-100",children:"My Profile"}),(0,l.jsx)("button",{onClick:()=>{p((0,o.ri)()),j.push("/login")},className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:"Log Out"})]})]})]})})]})})},f=e=>{let{children:s,toggleSidebar:t}=e;return(0,i.d4)(e=>e.auth.user),(0,l.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,l.jsx)(j,{toggleSidebar:t}),(0,l.jsx)("main",{className:"flex-1 p-6 bg-gray-50",children:s}),(0,l.jsx)("footer",{className:"bg-white py-4 border-t",children:(0,l.jsx)("div",{className:"container mx-auto px-6 text-center text-gray-500",children:(0,l.jsx)("span",{children:"Copyright \xa9 2025. Kashish India PVT LTD. All rights reserved."})})})]})},b=e=>{let{children:s}=e,[t,r]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)("side1"),[x,m]=(0,a.useState)(!1),[g,j]=(0,a.useState)(!1),b=()=>r(!t),v=(0,i.d4)(e=>e.auth.isAuthenticated);console.log((0,i.d4)(e=>e.auth.user));let N=(0,c.useRouter)();(0,i.wA)();let[y,w]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{w(!0),y&&!v&&N.push("/Login")},[v,y]),v)?(0,l.jsxs)("div",{className:"min-h-screen flex flex-col ".concat(t?"pl-64":"pl-20"),children:[(0,l.jsx)(n(),{children:(0,l.jsx)("title",{children:"AeronPay Dashboard"})}),(0,l.jsx)(p,{sidebarOpen:t,hoveredSidebar:g,toggleSidebar:b,setHoveredSidebar:j}),(0,l.jsx)(f,{toggleSidebar:b,children:s})]}):(0,l.jsx)("div",{children:(0,l.jsx)("main",{children:s})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[261,844,446,927,540,41,617,441,684,358],()=>s(9204)),_N_E=e.O()}]);