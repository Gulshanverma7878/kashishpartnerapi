(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{413:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var a=r(1990),l=r(2525);let s=(0,a.U1)({reducer:{auth:l.Ay}})},1842:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var a=r(5784);let l={getProfileData:e=>a.S.get("/api/user/".concat(e)),putProfileData:(e,t)=>a.S.put("/api/user/".concat(e),t)}},2525:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,LA:()=>l,Qv:()=>n,ri:()=>s});let a=(0,r(1990).Z0)({name:"auth",initialState:{token:null,user:null,isAuthenticated:!1},reducers:{setCredentials:(e,t)=>{let{token:r,user:a}=t.payload;e.token=r,r&&!(r.length<=0)&&(e.user=a,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)))},updateToken:(e,t)=>{let r=t.payload;r&&!(r.length<=0)&&(e.token=r,e.isAuthenticated=!0,localStorage.setItem("token",r))},updateUser:(e,t)=>{let r=t.payload;e.user=r,localStorage.setItem("user",JSON.stringify(r))},logout:e=>{e.token=null,e.user=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},hydrate:e=>{let t=localStorage.getItem("token"),r=localStorage.getItem("user");e.token=t,e.user=r&&JSON.parse(r),e.isAuthenticated=!!(t&&r)}}}),{setCredentials:l,logout:s,hydrate:n,updateToken:i,updateUser:o}=a.actions,u=a.reducer},2527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),l=r(2115),s=r(6629),n=r(4540),i=r(9911),o=r(1842),u=r(5041);let d=e=>{let t=(0,u.n)({mutationFn:async t=>(await o.W.putProfileData(e,t)).data});return{mutate:t.mutate,isPending:t.isPending,data:t.data,error:t.error}},c=e=>{let{profile:t,onClose:r,userId:s,onUpdateSuccess:n}=e,[i,o]=(0,l.useState)({name:t.name||"",email:t.email||"",mobileno:t.mobileno||"",city:t.city||"",shopName:t.shopName||"",aadharCardNumber:t.aadharCardNumber||"",panCardNumber:t.panCardNumber||"",udhyamAadharNumber:t.udhyamAadharNumber||"",gstRegistrationNumber:t.gstRegistrationNumber||"",businessType:t.businessType||""}),{mutate:u,isPending:c,error:m}=d(s),b=e=>{o(t=>({...t,[e.target.name]:e.target.value}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white w-[90%] md:w-[80%] max-h-[90vh] overflow-y-auto p-6 rounded-xl shadow-lg relative",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-blue-600 mb-6",children:"Edit Profile"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(i,{onSuccess:()=>{alert("Profile updated!"),n(),r()},onError:()=>{alert("Update failed.")}})},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[{label:"Name",name:"name"},{label:"Email",name:"email"},{label:"Mobile Number",name:"mobileno"},{label:"City",name:"city"},{label:"Shop Name",name:"shopName"},{label:"Aadhaar Number",name:"aadharCardNumber"},{label:"PAN Number",name:"panCardNumber"},{label:"Udyam Aadhaar No.",name:"udhyamAadharNumber"},{label:"GST Registration No.",name:"gstRegistrationNumber"},{label:"Business Type",name:"businessType"}].map(e=>{let{label:t,name:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:r,className:"text-sm text-gray-700 font-medium mb-1",children:t}),(0,a.jsx)("input",{type:"text",id:r,name:r,value:i[r],onChange:b,className:"px-4 py-2 border rounded-md border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none"})]},r)}),(0,a.jsxs)("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Save Changes"})]})]})]})})},m=e=>{let{label:t,value:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 font-semibold uppercase mb-1",children:t}),(0,a.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:r||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not Available"})})]})},b=()=>{var e;let{mutate:t,isPending:r,data:o,error:u}=(0,s.A)(),d=(0,n.d4)(e=>e.auth.user),[b,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(null==d?void 0:d.id)&&t(d.id)},[null==d?void 0:d.id]);let h=(null==o||null==(e=o.data)?void 0:e[0])||{},g=e=>e||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not Available"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"max-w-6xl mx-auto  ",children:(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-md shadow-xl border border-gray-200 rounded-3xl p-8 relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full shadow",children:(0,a.jsx)(i.NBi,{className:"text-blue-600 text-5xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:g(h.name)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["User ID: ",g(h.id)]})]})]}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-2 rounded-xl shadow hover:scale-105 transition",children:"Edit Profile"})]}),r&&(0,a.jsx)("p",{className:"text-blue-600 mb-4",children:"Loading profile..."}),u&&(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"Failed to load profile."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(m,{label:"Email",value:h.email}),(0,a.jsx)(m,{label:"Mobile No",value:h.mobileno}),(0,a.jsx)(m,{label:"Status",value:h.status}),(0,a.jsx)(m,{label:"Created At",value:h.createdAt?new Date(h.createdAt).toLocaleString():null}),(0,a.jsx)(m,{label:"City",value:h.city}),(0,a.jsx)(m,{label:"Shop Name",value:h.shopName}),(0,a.jsx)(m,{label:"Aadhaar No",value:h.aadharCardNumber}),(0,a.jsx)(m,{label:"PAN No",value:h.panCardNumber}),(0,a.jsx)(m,{label:"Udyam Aadhaar No",value:h.udhyamAadharNumber}),(0,a.jsx)(m,{label:"GST No",value:h.gstRegistrationNumber}),(0,a.jsx)(m,{label:"Business Type",value:h.businessType})]})]})}),b&&(null==d?void 0:d.id)&&(0,a.jsx)(c,{profile:h,onClose:()=>p(!1),userId:d.id,onUpdateSuccess:()=>{(null==d?void 0:d.id)&&t(d.id)}})]})}},4257:(e,t,r)=>{Promise.resolve().then(r.bind(r,2527))},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(l),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var a,l,s;a=e,l=t,s=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(c,i({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function c(e){var t=t=>{var r,{attr:l,size:s,title:o}=e,d=function(e,t){if(null==e)return{};var r,a,l=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,n),c=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(l)}},5784:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});var a=r(3464),l=r(413),s=r(2525),n=r(6671);let i=r(9509).env.NEXT_PUBLIC_API_URL||"https://api.partner.kashishindiapvtltd.com/",o=a.A.create({baseURL:i,headers:{"Content-Type":"application/json"},timeout:6e5});o.interceptors.request.use(e=>{let t=l.M.getState().auth.token;return e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>(e.data.err&&(0,n.oR)("Failed",{description:e.data.err||"Error in Request"}),e),e=>{var t,r,a,i,o;try{(0,n.oR)("Error In Request",{description:(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.err)||(null==e||null==(o=e.response)||null==(i=o.data)?void 0:i.message)||"Request Failed"})}catch(t){let{message:e}=t;console.error("error",e),(0,n.oR)("Error",{description:"failed to resolve response"})}return console.log("error",e),(null==(t=e.response)?void 0:t.status)==401&&((0,n.oR)("Auth Expired",{description:"Login in to continue"}),l.M.dispatch((0,s.ri)()),window.location.href="/"),Promise.reject(e)})},6629:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(1842),l=r(5041);r(2115);let s=()=>{let e=(0,l.n)({mutationFn:async e=>{let{data:t}=await a.W.getProfileData(e);return t}});return{mutate:e.mutate,isPending:e.isPending,data:e.data,error:e.error}}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,927,540,41,441,684,358],()=>t(4257)),_N_E=e.O()}]);