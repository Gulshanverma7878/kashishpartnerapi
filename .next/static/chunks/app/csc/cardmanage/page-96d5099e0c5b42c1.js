(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{7709:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),r=a(2115);let l="https://api.partner.kashishindiapvtltd.com/api/card";function c(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[n,d]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[p,m]=(0,r.useState)({card:"",cvv:"",expiry_date:"",pin:""});(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{c(!0);let e=await fetch(l),a=await e.json();a.data&&t(a.data)}catch(e){console.error("Error fetching cards:",e),alert("Failed to fetch cards")}finally{c(!1)}},b=async e=>{e.preventDefault();try{(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok?(alert("Card created successfully"),d(!1),m({card:"",cvv:"",expiry_date:"",pin:""}),h()):alert("Failed to create card")}catch(e){console.error("Error creating card:",e),alert("Error creating card")}},g=async(e,t)=>{try{(await fetch("".concat(l,"/update-status/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"ACTIVE"===t?"INACTIVE":"ACTIVE"})})).ok?(alert("Status updated successfully"),h()):alert("Failed to update status")}catch(e){console.error("Error updating status:",e),alert("Error updating status")}},y=async e=>{e.preventDefault();try{(await fetch("".concat(l,"/").concat(u.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok?(alert("Card updated successfully"),o(!1),x(null),m({card:"",cvv:"",expiry_date:"",pin:""}),h()):alert("Failed to update card")}catch(e){console.error("Error updating card:",e),alert("Error updating card")}},f=async e=>{if(confirm("Are you sure you want to delete this card?"))try{(await fetch("".concat(l,"/").concat(e),{method:"DELETE"})).ok?(alert("Card deleted successfully"),h()):alert("Failed to delete card")}catch(e){console.error("Error deleting card:",e),alert("Error deleting card")}},v=e=>{x(e),m({card:e.card,cvv:e.cvv,expiry_date:e.expiry_date,pin:e.pin||""}),o(!0)},N=()=>{d(!1),o(!1),x(null),m({card:"",cvv:"",expiry_date:"",pin:""})};return a?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Card Management"}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition",children:"+ Add Card"})]}),(0,s.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Sr. No"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Card Number"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"CVV"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Expiry Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t+1}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.card}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.cvv}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.expiry_date}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("button",{onClick:()=>g(e.id,e.status),className:"mr-2 px-4 py-2 rounded text-white text-sm ".concat("ACTIVE"===e.status?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"),children:"ACTIVE"===e.status?"Deactivate":"Activate"}),(0,s.jsx)("button",{onClick:()=>v(e),className:"mr-2 px-4 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>f(e.id),className:"px-4 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]},e.id))})]})}),n&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create New Card"}),(0,s.jsxs)("form",{onSubmit:b,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Card Number"}),(0,s.jsx)("input",{type:"text",value:p.card,onChange:e=>m({...p,card:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"CVV"}),(0,s.jsx)("input",{type:"text",value:p.cvv,onChange:e=>m({...p,cvv:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Expiry Date"}),(0,s.jsx)("input",{type:"text",placeholder:"MM/YYYY",value:p.expiry_date,onChange:e=>m({...p,expiry_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"PIN (Optional)"}),(0,s.jsx)("input",{type:"text",value:p.pin,onChange:e=>m({...p,pin:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create"})]})]})]})}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Edit Card"}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Card Number"}),(0,s.jsx)("input",{type:"text",value:p.card,onChange:e=>m({...p,card:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"CVV"}),(0,s.jsx)("input",{type:"text",value:p.cvv,onChange:e=>m({...p,cvv:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Expiry Date"}),(0,s.jsx)("input",{type:"text",placeholder:"MM/YYYY",value:p.expiry_date,onChange:e=>m({...p,expiry_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"PIN (Optional)"}),(0,s.jsx)("input",{type:"text",value:p.pin,onChange:e=>m({...p,pin:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update"})]})]})]})})]})}},9261:(e,t,a)=>{Promise.resolve().then(a.bind(a,7709))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9261)),_N_E=e.O()}]);